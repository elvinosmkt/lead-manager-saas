<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeadScraper - Google Maps Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: {
                            900: '#0B0F19', // Fundo Principal
                            800: '#151B2B', // Cards/Nav
                            700: '#1E293B', // Bordas
                        },
                        primary: {
                            500: '#10B981', // Verde Neon Principal
                            600: '#059669',
                            glow: 'rgba(16, 185, 129, 0.5)'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0B0F19;
            color: #fff;
        }

        .glass {
            background: rgba(21, 27, 43, 0.7);
            backdrop-filter: blur(10px);
        }

        .input-dark {
            background-color: #0B0F19;
            border-color: #1E293B;
            color: white;
        }

        .input-dark:focus {
            border-color: #10B981;
            ring: 1px solid #10B981;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0B0F19;
        }

        ::-webkit-scrollbar-thumb {
            background: #1E293B;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #374151;
        }
    </style>
</head>

<body class="min-h-screen pb-20">

    <!-- Navbar Premium -->
    <nav class="border-b border-dark-700 bg-dark-800 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between h-18 py-3">
                <!-- Logo -->
                <div class="flex items-center gap-3">
                    <div
                        class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-900/50">
                        <i class="fas fa-rocket text-white"></i>
                    </div>
                    <div>
                        <span class="font-bold text-xl tracking-tight text-white">LeadScraper</span>
                        <span class="text-[9px] uppercase font-bold text-gray-400 block -mt-1 tracking-widest">Google
                            Maps Intelligence</span>
                    </div>
                </div>

                <!-- Right Actions -->
                <div class="flex items-center gap-6">
                    <button onclick="openScriptModal()"
                        class="hidden md:flex items-center gap-2 text-sm font-medium text-gray-300 hover:text-white transition">
                        <i class="fas fa-file-alt"></i> Script de Venda
                    </button>

                    <!-- Credits Badge -->
                    <a href="credits.html"
                        class="group flex items-center gap-3 bg-dark-900 border border-dark-700 hover:border-primary-500 rounded-full pl-4 pr-2 py-1.5 transition cursor-pointer">
                        <div class="flex flex-col items-end leading-none">
                            <span
                                class="text-[10px] text-gray-500 font-bold uppercase group-hover:text-primary-500 transition">Cr√©ditos</span>
                            <span id="creditsDisplay" class="font-bold text-white text-sm">PRO</span>
                        </div>
                        <div
                            class="w-7 h-7 bg-blue-600 rounded-full flex items-center justify-center group-hover:bg-primary-500 transition">
                            <i class="fas fa-plus text-xs"></i>
                        </div>
                    </a>

                    <!-- User Profile -->
                    <div class="flex items-center gap-3 cursor-pointer pl-4 border-l border-dark-700"
                        onclick="openProfileModal()">
                        <div class="text-right hidden sm:block">
                            <h4 id="userName" class="text-sm font-bold text-white leading-none">Admin</h4>
                            <span
                                class="text-[10px] text-primary-500 font-bold uppercase bg-primary-500/10 px-1.5 rounded">ONLINE</span>
                        </div>
                        <div
                            class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-sm font-bold border-2 border-dark-800">
                            AD
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 mt-8">

        <!-- Search Area Premium -->
        <div class="bg-dark-800 rounded-2xl p-6 border border-dark-700 shadow-2xl mb-8">

            <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-end">
                <!-- Nicho -->
                <div class="md:col-span-3 space-y-1.5">
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1">Nicho</label>
                    <div class="relative group">
                        <i
                            class="fas fa-tag absolute left-4 top-3.5 text-gray-500 group-focus-within:text-white transition"></i>
                        <input type="text" id="nichoInput" placeholder="Ex: Pizzaria"
                            class="w-full bg-dark-900 border border-dark-700 rounded-xl pl-10 pr-4 py-3 text-white focus:border-primary-500 focus:ring-1 focus:ring-primary-500 outline-none transition input-dark">
                    </div>
                </div>

                <!-- Cidade -->
                <div class="md:col-span-3 space-y-1.5">
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1">Cidade</label>
                    <div class="relative group">
                        <i
                            class="fas fa-location-dot absolute left-4 top-3.5 text-gray-500 group-focus-within:text-white transition"></i>
                        <input type="text" id="cidadeInput" placeholder="Ex: Curitiba"
                            class="w-full bg-dark-900 border border-dark-700 rounded-xl pl-10 pr-4 py-3 text-white focus:border-primary-500 focus:ring-1 focus:ring-primary-500 outline-none transition input-dark">
                    </div>
                </div>

                <!-- Qtd -->
                <div class="md:col-span-2 space-y-1.5">
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1">Quantidade</label>
                    <div class="relative">
                        <i class="fas fa-hashtag absolute left-4 top-3.5 text-gray-500"></i>
                        <select id="maxLeadsInput"
                            class="w-full bg-dark-900 border border-dark-700 rounded-xl pl-10 pr-8 py-3 text-white appearance-none focus:border-primary-500 outline-none cursor-pointer">
                            <option value="10"># 10 Leads</option>
                            <option value="50"># 50 Leads</option>
                            <option value="100"># 100 Leads</option>
                        </select>
                        <i
                            class="fas fa-chevron-down absolute right-4 top-4 text-gray-600 text-xs pointer-events-none"></i>
                    </div>
                </div>

                <!-- Filtro Site -->
                <div class="md:col-span-2 space-y-1.5">
                    <label class="text-[10px] font-bold text-gray-400 uppercase tracking-wider ml-1">Status Site</label>
                    <div class="relative">
                        <i class="fas fa-globe absolute left-4 top-3.5 text-gray-500"></i>
                        <select id="filterSiteInput"
                            class="w-full bg-dark-900 border border-dark-700 rounded-xl pl-10 pr-8 py-3 text-white appearance-none focus:border-primary-500 outline-none cursor-pointer">
                            <option value="todos">üåê Todos</option>
                            <option value="sem-site" selected>üî• Sem Site (Hot)</option>
                            <option value="com-site">‚úÖ Com Site</option>
                        </select>
                        <i
                            class="fas fa-chevron-down absolute right-4 top-4 text-gray-600 text-xs pointer-events-none"></i>
                    </div>
                </div>

                <!-- Action Button -->
                <div class="md:col-span-2">
                    <button id="btnSearch" onclick="startSearch()"
                        class="w-full bg-primary-500 hover:bg-primary-600 text-white font-bold py-3 rounded-xl shadow-[0_0_20px_rgba(16,185,129,0.3)] transition transform active:scale-95 flex items-center justify-center gap-2">
                        <i class="fas fa-search"></i>
                        <span>INICIAR BUSCA</span>
                    </button>
                    <button id="btnStop" onclick="stopSearch()"
                        class="hidden w-full bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded-xl shadow-lg transition flex items-center justify-center gap-2">
                        <i class="fas fa-stop"></i> PARAR
                    </button>
                </div>
            </div>

            <!-- Progress Bar Premium -->
            <div id="progressContainer" class="hidden mt-6 pt-6 border-t border-dark-700">
                <div class="flex justify-between items-end mb-2">
                    <div class="flex items-center gap-3">
                        <div class="w-2 h-2 bg-primary-500 rounded-full animate-pulse"></div>
                        <span class="text-primary-500 font-bold text-sm tracking-wide" id="currentBusiness">Coletando
                            dados...</span>
                    </div>
                    <span class="text-white font-mono font-bold"><span id="leadsFoundCount"
                            class="text-primary-500">0</span> leads encontrados</span>
                </div>
                <div class="w-full bg-dark-900 rounded-full h-2 overflow-hidden border border-dark-700">
                    <div id="progressBar"
                        class="bg-primary-500 h-full rounded-full transition-all duration-300 shadow-[0_0_10px_rgba(16,185,129,0.5)]"
                        style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Toolbar & Filters -->
        <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-6">
            <div class="flex bg-dark-800 p-1 rounded-xl border border-dark-700">
                <button onclick="filterLeads('all')"
                    class="filter-btn active px-4 py-2 rounded-lg text-sm font-medium text-white bg-dark-700 shadow transition"
                    data-status="all">
                    Todos <span id="countAll" class="ml-1 opacity-60 text-xs">0</span>
                </button>
                <button onclick="filterLeads('interested')"
                    class="filter-btn px-4 py-2 rounded-lg text-sm font-medium text-gray-400 hover:text-white transition"
                    data-status="interested">
                    Interessados
                </button>
                <button onclick="filterLeads('discarded')"
                    class="filter-btn px-4 py-2 rounded-lg text-sm font-medium text-gray-400 hover:text-white transition"
                    data-status="discarded">
                    Descartados
                </button>
            </div>

            <div class="flex gap-3">
                <div class="relative">
                    <i class="fas fa-filter absolute left-3 top-3 text-gray-500 text-xs"></i>
                    <input type="text" id="filterCity" list="citiesList" oninput="applyFilters()"
                        placeholder="Filtrar por nome..."
                        class="bg-dark-800 border border-dark-700 rounded-lg pl-8 pr-3 py-2 text-sm text-white focus:border-primary-500 outline-none w-48">
                    <datalist id="citiesList"></datalist>
                </div>
                <button onclick="exportToExcel()"
                    class="bg-white text-dark-900 hover:bg-gray-100 font-bold px-4 py-2 rounded-lg text-sm transition flex items-center gap-2">
                    <i class="fas fa-download"></i> Exportar
                </button>
            </div>
        </div>

        <!-- Grid de Cards Premium -->
        <div id="leadsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
            <!-- Template JS Render -->
        </div>

    </main>

    <!-- Script Modal -->
    <div id="scriptModal"
        class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-dark-800 border border-dark-700 rounded-2xl w-full max-w-lg shadow-2xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-lg font-bold text-white flex items-center gap-2"><i
                        class="fas fa-file-alt text-primary-500"></i> Script de Venda</h3>
                <button onclick="closeScriptModal()" class="text-gray-500 hover:text-white"><i
                        class="fas fa-times"></i></button>
            </div>
            <textarea id="msgTemplate" rows="6"
                class="w-full bg-dark-900 border border-dark-700 rounded-xl p-4 text-gray-300 focus:border-primary-500 outline-none resize-none mb-4 text-sm font-mono"></textarea>
            <div class="flex justify-end gap-3">
                <button onclick="saveScript()"
                    class="bg-primary-500 hover:bg-primary-600 text-white font-bold py-2 px-6 rounded-lg transition">Salvar
                    Configura√ß√£o</button>
            </div>
        </div>
    </div>

    <!-- Supabase Client & Logic -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-client.js"></script>
    <script>
        // --- CONFIGURA√á√ïES GLOBAIS ---
        const API_URL = 'https://web-production-a818.up.railway.app/api';

        let state = {
            leads: [],
            isSearching: false,
            pollingInterval: null,
            filterStatus: 'all',
            sessionId: null,
            user: null
        };

        // --- INICIALIZA√á√ÉO ---
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // 1. Verifica Login
                const user = await LeadAPI.getUser();
                if (!user) {
                    window.location.href = 'login.html';
                    return;
                }

                state.user = user;
                state.sessionId = user.id;

                // 2. Atualiza UI do Usu√°rio
                const userName = user.email.split('@')[0];
                document.getElementById('userName').innerText = userName.charAt(0).toUpperCase() + userName.slice(1);

                // 3. Carrega Leads do Banco
                console.log('üîÑ Carregando leads...');
                state.leads = await LeadAPI.getAll();
                renderLeads();

                // 4. Carrega Template de Mensagem
                loadMessageTemplate();

            } catch (error) {
                console.error("Erro cr√≠tico na inicializa√ß√£o:", error);
                if (error.message && error.message.includes('token')) {
                    localStorage.clear();
                    window.location.href = 'login.html';
                }
            }
        });

        // --- FUN√á√ïES DE BUSCA (CORE) ---
        async function startSearch() {
            const nicho = document.getElementById('nichoInput').value.trim();
            const cidade = document.getElementById('cidadeInput').value.trim();
            const qtd = document.getElementById('maxLeadsInput').value;
            const siteFilter = document.getElementById('filterSiteInput').value;

            if (!nicho || !cidade) return alert('Por favor, preencha Nicho e Cidade.');

            toggleSearchUI(true);

            try {
                console.log('üöÄ Iniciando busca:', { nicho, cidade, qtd });

                const response = await fetch(`${API_URL}/start-search`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        nicho,
                        cidade,
                        max_leads: qtd,
                        user_id: state.sessionId,
                        filter_site: siteFilter,
                        filter_whats: 'todos'
                    })
                });

                // VERIFICA√á√ÉO DE ERRO JSON (CR√çTICO)
                const contentType = response.headers.get("content-type");
                if (!contentType || !contentType.includes("application/json")) {
                    const textObj = await response.text();
                    console.error("‚ùå ERRO API (HTML Retornado):", textObj);
                    throw new Error("O servidor retornou um erro inesperado (HTML). Verifique o console.");
                }

                const data = await response.json();

                if (response.ok) {
                    // showNotification('Busca iniciada! Acompanhe o progresso.', 'success');
                    startPolling();
                } else {
                    throw new Error(data.error || 'Falha ao iniciar busca.');
                }

            } catch (error) {
                console.error(error);
                alert('Erro: ' + error.message);
                toggleSearchUI(false);
            }
        }

        function stopSearch() {
            if (state.pollingInterval) clearInterval(state.pollingInterval);
            toggleSearchUI(false);

            // Envia sinal de paragem
            fetch(`${API_URL}/cancel-search`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ user_id: state.sessionId })
            }).then(() => console.log('üõë Sinal de parada enviado.'));
        }

        function startPolling() {
            if (state.pollingInterval) clearInterval(state.pollingInterval);

            state.pollingInterval = setInterval(async () => {
                try {
                    const res = await fetch(`${API_URL}/search-status?session_id=${state.sessionId}`);

                    const contentType = res.headers.get("content-type");
                    if (!contentType || !contentType.includes("application/json")) return;

                    const data = await res.json();

                    updateProgressUI(data);

                    if (data.leads && data.leads.length > 0) {
                        let novos = 0;
                        data.leads.forEach(newLead => {
                            if (!state.leads.some(l => l.nome === newLead.nome)) {
                                state.leads.unshift(newLead);
                                novos++;
                            }
                        });

                        if (novos > 0) renderLeads();
                    }

                    if (data.completed || (data.status !== 'running' && data.status !== 'queued' && data.status !== 'initializing')) {
                        stopSearch();

                        if (data.status === 'error') {
                            alert('A busca parou com erro: ' + data.error);
                        } else {
                            setTimeout(async () => {
                                state.leads = await LeadAPI.getAll();
                                renderLeads();
                            }, 1000);
                        }
                    }

                } catch (e) {
                    console.error("Polling error:", e);
                }
            }, 1000);
        }

        // --- INTERFACE (RENDERIZA√á√ÉO) ---
        function renderLeads() {
            const grid = document.getElementById('leadsGrid');
            grid.innerHTML = '';
            const cityFilter = document.getElementById('filterCity').value.toLowerCase();

            const filtered = state.leads.filter(l => {
                if (state.filterStatus !== 'all' && (l.status || 'new') !== state.filterStatus) return false;
                if (cityFilter && !(l.cidade || '').toLowerCase().includes(cityFilter)) return false;
                return true;
            });

            document.getElementById('countAll').innerText = state.leads.length;

            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div class="col-span-full py-16 text-center border-2 border-dashed border-dark-700 rounded-2xl bg-dark-800/30">
                        <i class="fas fa-search text-3xl text-gray-600 mb-3"></i>
                        <p class="text-gray-400">Nenhum resultado encontrado.</p>
                    </div>`;
                return;
            }

            filtered.forEach(l => {
                const hasSite = l.website && l.website.length > 5;
                const hasWhats = l.whatsapp && l.whatsapp.length > 5;
                const card = document.createElement('div');

                card.className = "bg-dark-800 border border-dark-700 rounded-xl p-5 shadow-lg relative group transition hover:border-dark-600";

                card.innerHTML = `
                   <div class="flex justify-between items-start mb-3">
                        <div class="flex gap-2">
                            ${!hasSite ?
                        `<span class="bg-red-500/10 text-red-500 text-[9px] font-bold px-1.5 py-0.5 rounded border border-red-500/20 flex items-center gap-1">SEM SITE</span>` :
                        `<span class="bg-blue-500/10 text-blue-400 text-[9px] font-bold px-1.5 py-0.5 rounded border border-blue-500/20 flex items-center gap-1">COM SITE</span>`
                    }
                            ${hasWhats ?
                        `<span class="bg-green-500/10 text-green-500 text-[9px] font-bold px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-1">WHATSAPP</span>` : ''
                    }
                        </div>
                        <span class="text-[10px] font-bold text-yellow-500 flex items-center gap-1 bg-yellow-500/10 px-1.5 rounded">
                            <i class="fas fa-star"></i> ${l.avaliacao || '0.0'}
                        </span>
                    </div>

                    <h3 class="font-bold text-white text-base mb-0.5 line-clamp-1" title="${l.nome}">${l.nome}</h3>
                    <p class="text-[10px] text-gray-500 uppercase font-bold tracking-wider mb-3">${l.nicho || 'Geral'}</p>

                    <div class="space-y-2 mb-4">
                        <p class="text-xs text-gray-400 flex items-start gap-2">
                             <i class="fas fa-map-marker-alt text-gray-600 mt-0.5"></i> 
                             <span class="line-clamp-2 leading-relaxed">${l.endereco || 'Endere√ßo n√£o dispon√≠vel'}</span>
                        </p>
                        <div class="flex items-center gap-2">
                             <div class="bg-dark-900 border border-dark-700 px-2 py-1.5 rounded text-xs font-mono text-gray-300 flex-1 truncate">
                                ${l.telefone || 'Sem Telefone'}
                             </div>
                             <a href="${l.google_maps_link}" target="_blank" class="bg-dark-900 border border-dark-700 px-2 py-1.5 rounded text-blue-400 hover:text-white hover:bg-blue-600 transition">
                                <i class="fas fa-external-link-alt"></i>
                             </a>
                        </div>
                    </div>

                    <div class="flex gap-2 pt-3 border-t border-dark-700">
                        <button onclick="sendWhatsapp('${l.whatsapp}', '${l.nome}', '${l.cidade}', '${l.nicho}')" 
                             class="flex-1 ${hasWhats ? 'bg-primary-600 hover:bg-primary-500 text-white' : 'bg-dark-700 text-gray-500 cursor-not-allowed'} font-bold py-2 rounded-lg text-xs flex items-center justify-center gap-2 transition">
                             <i class="fab fa-whatsapp text-sm"></i> ABORDAR
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function toggleSearchUI(searching) {
            state.isSearching = searching;
            const btnSearch = document.getElementById('btnSearch');
            const btnStop = document.getElementById('btnStop');
            const progress = document.getElementById('progressContainer');

            if (searching) {
                btnSearch.classList.add('hidden');
                btnStop.classList.remove('hidden');
                progress.classList.remove('hidden');
            } else {
                btnSearch.classList.remove('hidden');
                btnStop.classList.add('hidden');
                progress.classList.add('hidden');
            }
        }

        function updateProgressUI(data) {
            if (data.status === 'running' || data.status === 'initializing') {
                document.getElementById('currentBusiness').innerText = data.current || "Processando...";
                document.getElementById('leadsFoundCount').innerText = data.leads_found || 0;

                const maxLeads = parseInt(document.getElementById('maxLeadsInput').value) || 10;
                const pct = Math.min(100, Math.round((data.leads_found / maxLeads) * 100));
                document.getElementById('progressBar').style.width = `${pct}%`;
            }
        }

        function filterLeads(status) {
            state.filterStatus = status;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.dataset.status === status) {
                    btn.classList.add('bg-dark-700', 'text-white', 'shadow');
                    btn.classList.remove('text-gray-400', 'bg-transparent');
                } else {
                    btn.classList.remove('bg-dark-700', 'text-white', 'shadow');
                    btn.classList.add('text-gray-400', 'bg-transparent');
                }
            });
            renderLeads();
        }

        function applyFilters() { renderLeads(); }

        function sendWhatsapp(num, nome, cidade, nicho) {
            if (!num || num.length < 5) return alert('Sem n√∫mero de WhatsApp v√°lido.');

            let msg = getMessageTemplate();
            msg = msg.replace(/{nome}/g, nome)
                .replace(/{cidade}/g, cidade || '')
                .replace(/{nicho}/g, nicho || '');

            const cleanNum = num.replace(/\D/g, '');
            window.open(`https://wa.me/${cleanNum}?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function loadMessageTemplate() {
            try {
                const saved = localStorage.getItem('leadManager_msg');
                if (saved) document.getElementById('msgTemplate').value = saved;
                else document.getElementById('msgTemplate').value = "Ol√°! Vi a {nome} no Google...";
            } catch (e) { console.error(e); }
        }

        function saveScript() {
            const val = document.getElementById('msgTemplate').value;
            localStorage.setItem('leadManager_msg', val);
            alert('Script de venda salvo!');
            closeScriptModal();
        }

        function getMessageTemplate() {
            return document.getElementById('msgTemplate').value || "Ol√° {nome}!";
        }

        function openScriptModal() { document.getElementById('scriptModal').classList.remove('hidden'); }
        function closeScriptModal() { document.getElementById('scriptModal').classList.add('hidden'); }
        function openProfileModal() { window.location.href = 'profile.html'; }

        function exportToExcel() {
            if (state.leads.length === 0) return alert("Nada para exportar.");
            const wb = XLSX.utils.book_new();
            const ws = XLSX.utils.json_to_sheet(state.leads);
            XLSX.utils.book_append_sheet(wb, ws, "Leads");
            XLSX.writeFile(wb, "LeadScraper_Export.xlsx");
        }

        async function logout() {
            await LeadAPI.logout();
            window.location.href = 'login.html';
        }
    </script>
</body>

</html>